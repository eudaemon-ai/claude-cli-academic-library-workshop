import{c as Q,a as b,f as _}from"../chunks/BzzAkpJO.js";import{o as V}from"../chunks/BmTg3lyu.js";import{f as W,c as e,s as n,r as t,t as T,p as N,a as O,g as s,n as H,u as B,aF as X,I as E,ax as U}from"../chunks/CKmK40wl.js";import{d as q,i as S,s as p,a as G}from"../chunks/gAHvPrMa.js";import{a as Y}from"../chunks/Ucc0UpXt.js";import{e as z,i as F,s as J}from"../chunks/DEdCDX_L.js";import{s as Z}from"../chunks/Dpdp6QWd.js";import{s as $}from"../chunks/DXPvdZ8x.js";var tt=_('<div class="mb-4 flex items-start justify-between rounded-lg border border-amber-200 bg-amber-50 px-4 py-3"><div class="flex items-start gap-3"><span class="mt-0.5 text-amber-600">⚠</span> <p class="text-sm text-amber-800"><strong> </strong> </p></div> <button class="ml-4 text-amber-500 hover:text-amber-700" aria-label="Dismiss">✕</button></div>');function et(C,a){var d=Q(),v=W(d);{var c=g=>{var i=tt(),o=e(i),h=n(e(o),2),x=e(h),r=e(x);t(x);var l=n(x);t(h),t(o);var y=n(o,2);t(i),T(()=>{p(r,`${a.behindCount??""} learner${a.behindCount>1?"s are":" is"}`),p(l,` more than one exercise
				behind the cohort median (${a.medianLabel??""}). Consider pausing for a group sync.`)}),G("click",y,function(...m){a.onDismiss?.apply(this,m)}),b(g,i)};S(v,g=>{a.behindCount>0&&g(c)})}b(C,d)}q(["click"]);function at(C){const a=Date.now()-new Date(C).getTime(),d=Math.floor(a/1e3);if(d<60)return`${d}s ago`;const v=Math.floor(d/60);return v<60?`${v}m ago`:`${Math.floor(v/60)}h ago`}var rt=_('<tr class="hover:bg-gray-50"><td class="px-4 py-3"><a class="font-medium text-gray-900 hover:text-blue-600"> </a></td><td class="px-4 py-3 text-gray-500"> </td><td class="px-4 py-3 text-gray-600"> </td><td class="px-4 py-3 text-gray-600"> </td><td class="px-4 py-3 text-gray-500"> </td><td class="px-4 py-3"><span> </span></td></tr>'),st=_('<div class="py-12 text-center"><svg class="mx-auto mb-3 h-8 w-8 text-gray-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0z"></path></svg> <p class="text-sm font-medium text-gray-500">No learners have joined yet</p> <p class="mt-1 text-sm text-gray-400">Share the workshop URL with your cohort to get started. Learners appear here after they enter their name on the home page.</p></div>'),ot=_('<div class="overflow-x-auto rounded-xl border border-gray-200 bg-white"><table class="w-full text-sm"><thead class="border-b border-gray-200 bg-gray-50 text-xs text-gray-500"><tr><th class="px-4 py-3 text-left font-medium">Name</th><th class="px-4 py-3 text-left font-medium">Role</th><th class="px-4 py-3 text-left font-medium">Currently On</th><th class="px-4 py-3 text-left font-medium">Steps</th><th class="px-4 py-3 text-left font-medium">Last Active</th><th class="px-4 py-3 text-left font-medium">Status</th></tr></thead><tbody class="divide-y divide-gray-100"></tbody></table> <!></div>');function nt(C,a){N(a,!0);const d={"on-pace":"text-green-700 bg-green-100",slow:"text-amber-700 bg-amber-100",inactive:"text-red-700 bg-red-100"},v={"on-pace":"● On pace",slow:"◐ Behind",inactive:"○ Inactive"};var c=ot(),g=e(c),i=n(e(g));z(i,21,()=>a.learners,F,(x,r)=>{var l=rt(),y=e(l),m=e(y),k=e(m,!0);t(m),t(y);var u=n(y),w=e(u,!0);t(u);var f=n(u),I=e(f,!0);t(f);var L=n(f),P=e(L,!0);t(L);var M=n(L),A=e(M,!0);t(M);var j=n(M),D=e(j),R=e(D,!0);t(D),t(j),t(l),T(K=>{J(m,"href",`/facilitator/${s(r).id??""}`),p(k,s(r).name),p(w,s(r).role),p(I,s(r).currentModule?`${s(r).currentModule} / ${s(r).currentExercise}`:"—"),p(P,s(r).stepsCompleted),p(A,K),Z(D,1,`rounded-full px-2 py-0.5 text-xs font-medium ${d[s(r).status]??""}`),p(R,v[s(r).status])},[()=>at(s(r).lastSeen)]),b(x,l)}),t(i),t(g);var o=n(g,2);{var h=x=>{var r=st();b(x,r)};S(o,x=>{a.learners.length===0&&x(h)})}t(c),b(C,c),O()}var it=_('<div class="group relative flex-1 rounded-lg bg-blue-600 px-2 py-3 text-center"><span class="text-xs font-medium text-white"> </span> <div class="pointer-events-none absolute -top-8 left-1/2 hidden -translate-x-1/2 whitespace-nowrap rounded bg-gray-900 px-2 py-1 text-xs text-white group-hover:block"> </div></div>'),dt=_('<div><p class="mb-2 text-xs font-medium text-gray-500"> </p> <div class="flex gap-2"></div></div>'),lt=_('<div class="rounded-xl border border-gray-200 bg-white p-6"><h3 class="mb-4 text-sm font-semibold text-gray-700">Module Progress Heatmap</h3> <div class="space-y-4"></div> <p class="mt-3 text-xs text-gray-400">Cell color = proportion of learners who reached each exercise</p></div>');function vt(C,a){N(a,!0);const d=B(()=>a.cells.reduce((i,o)=>(i[o.moduleId]||(i[o.moduleId]=[]),i[o.moduleId].push(o),i),{}));function v(i,o){return o===0?"0.05":Math.max(.1,i/o).toFixed(2)}var c=lt(),g=n(e(c),2);z(g,21,()=>Object.entries(s(d)),F,(i,o)=>{var h=B(()=>X(s(o),2));let x=()=>s(h)[1];var r=dt(),l=e(r),y=e(l,!0);t(l);var m=n(l,2);z(m,21,x,F,(k,u)=>{var w=it(),f=e(w),I=e(f,!0);t(f);var L=n(f,2),P=e(L,!0);t(L),t(w),T(M=>{$(w,`opacity: ${M??""}`),J(w,"title",`${s(u).exerciseTitle??""}: ${s(u).reachedCount??""}/${a.totalLearners??""} learners`),p(I,s(u).reachedCount),p(P,s(u).exerciseTitle)},[()=>v(s(u).reachedCount,a.totalLearners)]),b(k,w)}),t(m),t(r),T(()=>p(y,x()[0].moduleTitle)),b(i,r)}),t(g),H(2),t(c),b(C,c),O()}var ct=_(`<p class="text-sm text-gray-400">No facilitator notes for the current majority exercise. Talking points appear here when
			the exercise that most learners are on contains step-level guidance in the content files.</p>`),xt=_('<div class="border-t border-gray-100 px-4 py-3"><p class="text-sm text-gray-600 italic"> </p></div>'),mt=_('<div class="rounded-lg border border-gray-100 bg-gray-50"><button class="flex w-full items-center justify-between px-4 py-3 text-left text-sm font-medium text-gray-700"><span><span class="mr-2 text-gray-400"> </span> </span> <span class="text-gray-400"> </span></button> <!></div>'),ut=_('<div class="space-y-2"></div>'),pt=_('<div class="rounded-xl border border-gray-200 bg-white p-6"><h3 class="mb-4 text-sm font-semibold text-gray-700">Talking Points</h3> <!></div>');function gt(C,a){N(a,!0);let d=U(null);var v=pt(),c=n(e(v),2);{var g=o=>{var h=ct();b(o,h)},i=o=>{var h=ut();z(h,21,()=>a.points,F,(x,r,l)=>{var y=mt(),m=e(y),k=e(m),u=e(k),w=e(u);t(u);var f=n(u);t(k);var I=n(k,2),L=e(I,!0);t(I),t(m);var P=n(m,2);{var M=A=>{var j=xt(),D=e(j),R=e(D,!0);t(D),t(j),T(()=>p(R,s(r).note)),b(A,j)};S(P,A=>{s(d)===l&&A(M)})}t(y),T(()=>{p(w,`${s(r).exerciseTitle??""} —`),p(f,` ${s(r).stepLabel??""}`),p(L,s(d)===l?"▲":"▼")}),G("click",m,()=>E(d,s(d)===l?null:l,!0)),b(x,y)}),t(h),b(o,h)};S(c,o=>{a.points.length===0?o(g):o(i,!1)})}t(v),b(C,v),O()}q(["click"]);var ht=_('<div class="mx-auto max-w-7xl px-4 py-8"><div class="mb-6 flex items-center justify-between"><div><h1 class="text-2xl font-bold text-gray-900">Facilitator Dashboard</h1> <p class="text-sm text-gray-500"> </p></div> <span class="rounded-full bg-green-100 px-3 py-1 text-xs font-medium text-green-700">Live · refreshes every 30s</span></div> <!> <div class="grid gap-6 lg:grid-cols-3"><div class="lg:col-span-2"><!></div> <div><!></div></div> <div class="mt-6"><!></div></div>');function Mt(C,a){N(a,!0);let d=U(!1);V(()=>{const f=setInterval(()=>Y("app:cohort"),3e4);return()=>clearInterval(f)});var v=ht(),c=e(v),g=e(c),i=n(e(g),2),o=e(i);t(i),t(g),H(2),t(c);var h=n(c,2);{var x=f=>{et(f,{get behindCount(){return a.data.behindCount},get medianLabel(){return a.data.medianLabel},onDismiss:()=>E(d,!0)})};S(h,f=>{s(d)||f(x)})}var r=n(h,2),l=e(r),y=e(l);vt(y,{get cells(){return a.data.heatmapCells},get totalLearners(){return a.data.totalLearners}}),t(l);var m=n(l,2),k=e(m);gt(k,{get points(){return a.data.talkingPoints}}),t(m),t(r);var u=n(r,2),w=e(u);nt(w,{get learners(){return a.data.learners}}),t(u),t(v),T(()=>p(o,`Cohort: ${a.data.cohort??""} · ${a.data.totalLearners??""} learners`)),b(C,v),O()}export{Mt as component};
